#! /opt/homebrew/bin/fish

# Required parameters:
# @raycast.schemaVersion 1
# @raycast.title Prepare for streaming
# @raycast.mode silent

# Documentation:
# @raycast.author ppy
# @raycast.authorURL https://raycast.com/ppy

echo "Purging command line history..."

yes | history delete --contains "SHARED"
yes | history delete --contains ".osu."
yes | history delete --contains "ping"
yes | history delete --contains "youtube."
yes | history delete --contains "google."
yes | history delete --contains "cheat"
yes | history delete --contains "history delete"
yes | history delete --contains "yt-dlp"

echo "Killing unnecessary apps..."

pkill -x "datagrip"
pkill -x "Superhuman"
pkill -x "Safari"
pkill -x "Transmit"
pkill -x "Bear"
pkill -x "Things3"
pkill -x "Keychain Access"
pkill -x "IINA"

# echo "Destroying browser history..."

# rm -rf ~/Library/Caches/Safari
# rm -rf ~/Library/Safari/History*
# touch ~/Library/Caches/Safari

echo "Emptying trash..."

rm -rf ~/.Trash/*

echo "Starting streaming apps..."

open /Applications/Audio\ Hijack.app
open /Applications/OBS.app
open /Applications/Safari.app
# open /System/Applications/Music.app
# sleep 1

